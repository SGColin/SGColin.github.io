

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=&#34;light&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#000">
  <meta name="description" content="Records for Competitions on Codeforces and Links of my Summaries.">
  <meta name="author" content="Colin Gao">
  <meta name="keywords" content="">
  
  <title>Codeforces Records - Colin&#39;s Space</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/monokai-sublime.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"blog.gyx.me","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":90,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":false,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Colin's Space</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Codeforces Records">
              
            </span>

            
              <div class="mt-3">
  
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3k words
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      41
       mins to read
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Codeforces Records</h1>
            
            <div class="markdown-body">
              <center><font size=4>目前共做完了</font>   &nbsp; <font color=red size=6>2</font>  &nbsp;  <font size=4> 轮 Codeforces Contests 和</font> &nbsp; <font color=red size=6>1</font>  &nbsp;  <font size=4> 套 Gym</font></center>

<!--more-->

<h2 id="Dec-16-Round-761-4-6"><a href="#Dec-16-Round-761-4-6" class="headerlink" title="Dec / 16 - Round # 761 (4/6)"></a>Dec / 16 - Round # 761 (4/6)</h2><h2 id="Dec-14-Round-760-7-7"><a href="#Dec-14-Round-760-7-7" class="headerlink" title="Dec / 14 - Round # 760 (7/7)"></a>Dec / 14 - Round # 760 (7/7)</h2><h2 id="Nov-26-Round-757-3-6"><a href="#Nov-26-Round-757-3-6" class="headerlink" title="Nov / 26 - Round #757 (3/6)"></a>Nov / 26 - Round #757 (3/6)</h2><h2 id="Nov-23-Global-17-2-9"><a href="#Nov-23-Global-17-2-9" class="headerlink" title="Nov / 23 - Global #17 (2/9)"></a>Nov / 23 - Global #17 (2/9)</h2><h2 id="Nov-22-Edu-117-5-7"><a href="#Nov-22-Edu-117-5-7" class="headerlink" title="Nov / 22 - Edu #117 (5/7)"></a>Nov / 22 - Edu #117 (5/7)</h2><h2 id="Nov-14-Round-755-2-7"><a href="#Nov-14-Round-755-2-7" class="headerlink" title="Nov / 14 - Round #755 (2/7)"></a>Nov / 14 - Round #755 (2/7)</h2><h2 id="Nov-12-Round-754-4-6"><a href="#Nov-12-Round-754-4-6" class="headerlink" title="Nov / 12 - Round #754 (4/6)"></a>Nov / 12 - Round #754 (4/6)</h2><h2 id="Oct-30-Round-752-5-8"><a href="#Oct-30-Round-752-5-8" class="headerlink" title="Oct / 30 - Round #752 (5/8)"></a>Oct / 30 - Round #752 (5/8)</h2><ul>
<li><p>A（构造）：插入最少的数使得 $a_i\le i$ 。显然插入 $1$ 就可以了，需要插入的最少个数是 $\max_{i=1}^n\max(0, a_i-i)$ </p>
</li>
<li><p>B（构造）：将数列分段使每段 LIS 长度异或和为 $0$ 。偶数长 $1$ 个数 $1$ 段，奇数长找长度为 $2$ 的块 LIS 为 $1$ 即可。</p>
</li>
<li><p>C（构造）：若一个前缀可以删干净，则当前数可以在前方任意位置被删掉，暴力判断 10 个质数的范围即可。</p>
</li>
<li><p>D（构造）：找到一个 $n$ 使得 $n\ \text{mod}\ x = y\ \text{mod}\ n$ ，其中 $x,y$ 为偶数。</p>
<ul>
<li>若 $x&gt;y$ ，令 $n=x+y$ </li>
<li>若 $x=y$ ，令 $n=x$</li>
<li>若 $x&lt;y$ ，令 $n=\lfloor\frac{y}{x}\rfloor x+\frac{y\ \text{mod}\ x}{2}$ ，$x,y$ 为偶数保证 $y\ \text{mod}\ x$ 可以被 $2$ 整除</li>
<li>推导的方法是设 $n=t_1x+k,y = t_2n+k$ ，整理后发现令 $t_2=1$ 即可</li>
</ul>
</li>
<li><p>E（暴力）：设 $f[i][j]$ 表示有多少个 $i$ 的后缀，使得最优解中 $a_i\to j$ ，这样每个位置只有 $\sqrt{a_i}$ 种可能的取值，暴力转移即可，每次的贡献是 $i\times f[i+1][j]\times (\lceil\frac{a_i}{a_i+1}\rceil - 1)$ ，清空数组的方法比较有技巧。其实子序列也可以做。</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-keyword">int</span> a[N], f[<span class="hljs-number">2</span>][N];<br><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; pos[<span class="hljs-number">2</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">work</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> n = rd();<br>    <span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) a[i] = rd();<br>    <span class="hljs-keyword">int</span> u = (n &amp; <span class="hljs-number">1</span>), v = <span class="hljs-number">1</span> - (n &amp; <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = n; i; --i, u ^= <span class="hljs-number">1</span>, v ^= <span class="hljs-number">1</span>) &#123;<br>        f[u][a[i]] = <span class="hljs-number">1</span>;<br>        pos[u].push_back(a[i]);<br>        <span class="hljs-keyword">int</span> lst = a[i];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> x : pos[v]) &#123;<br>            <span class="hljs-keyword">int</span> cnt = (a[i] + x - <span class="hljs-number">1</span>) / x;<br>            <span class="hljs-comment">//前面的方案数为i, 后面的方案数为f[v][x]</span><br>            ans = (ans + <span class="hljs-number">1l</span>l * i * f[v][x] * (cnt - <span class="hljs-number">1</span>)) % mod;<br>            <span class="hljs-keyword">int</span> tar = a[i] / cnt;<br>            f[u][tar] += f[v][x];<br>            <span class="hljs-keyword">if</span> (lst != tar) &#123;pos[u].push_back(tar); lst = tar;&#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> x : pos[v]) f[v][x] = <span class="hljs-number">0</span>;<br>        pos[v].clear();<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, ans);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> x : pos[<span class="hljs-number">0</span>]) f[<span class="hljs-number">0</span>][x] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> x : pos[<span class="hljs-number">1</span>]) f[<span class="hljs-number">1</span>][x] = <span class="hljs-number">0</span>;<br>    pos[<span class="hljs-number">0</span>].clear(); pos[<span class="hljs-number">1</span>].clear();<br>&#125;<br></code></pre></div></td></tr></table></figure>



</li>
</ul>
<h2 id="Oct-29-Edu-116-4-6"><a href="#Oct-29-Edu-116-4-6" class="headerlink" title="Oct / 29 - Edu #116 (4/6)"></a>Oct / 29 - Edu #116 (4/6)</h2><h2 id="Oct-25-Round-751-3-8"><a href="#Oct-25-Round-751-3-8" class="headerlink" title="Oct / 25 - Round #751 (3/8)"></a>Oct / 25 - Round #751 (3/8)</h2><ul>
<li>D（不是DAG）：没注意到方案中一次跳跃可能会落到比出发点更低的地方。直接线段树优化建图是可以的。</li>
</ul>
<h2 id="Oct-24-Round-750-7-8"><a href="#Oct-24-Round-750-7-8" class="headerlink" title="Oct / 24 - Round #750 (7/8)"></a>Oct / 24 - Round #750 (7/8)</h2><ul>
<li>A （数据范围）：因为 1,2,3 个数都大于 $0$ ，所以可以组合出 $[1,\sum a_i]$ 内所有整数，所以拆成两部分差不会超过 $1$</li>
<li>D （特殊情况）：奇数构造时忘记考虑可能有相同的数字，用减法可能会产生 $0$ ，$n$ 为奇数的时候恰好是 $n$ 上界 $-1$ ，因此刚好剩出来一个 $10^4$ 的空间，直接用加法构造即可。</li>
<li>E （倒序转移）：要求区间越往后，长度越短+值越大，不好扩展（无法继承上一状态），转化成从右往左选区间，长度越长+值越小，这样就可以继承之前的状态了。设 $f[i][j]$ 表示到第 $i$ 个为止，最后一段长度为 $j$ 的区间和的最大值。</li>
<li>F （维护技巧）</li>
</ul>
<h2 id="Oct-17-Round-749-2-9"><a href="#Oct-17-Round-749-2-9" class="headerlink" title="Oct / 17 - Round #749 (2/9)"></a>Oct / 17 - Round #749 (2/9)</h2><h2 id="Oct-13-Edu-115-0-6"><a href="#Oct-13-Edu-115-0-6" class="headerlink" title="Oct / 13 - Edu #115 (0/6)"></a>Oct / 13 - Edu #115 (0/6)</h2><h2 id="Oct-09-Round-747-0-6"><a href="#Oct-09-Round-747-0-6" class="headerlink" title="Oct / 09 - Round #747 (0/6)"></a>Oct / 09 - Round #747 (0/6)</h2><h2 id="Oct-03-Round-746-5-7"><a href="#Oct-03-Round-746-5-7" class="headerlink" title="Oct / 03 - Round #746 (5/7)"></a>Oct / 03 - Round #746 (5/7)</h2><ul>
<li><p>B（分讨）：交换距离不小于 $k$ ，则不可移动的范围为 $[n - x + 1, x]$ ，只需保证这些位置数字正确即可。</p>
</li>
<li><p>C（性质）：注意到多个块是可以三个合并成一个的，因此任何解都等价于只划分成两个块或三个块。设所有 $a[i]$ 异或和为 $A$ ，若 $A=0$ 则可以划分为两个块。其余情况判断是否能划分成三个块，一遍 <code>dfs</code> 计数异或和为 $A$ 的块即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u, <span class="hljs-keyword">int</span> fa)</span> </span>&#123;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = hd[u], v; i; i = e[i].nxt)<br>		<span class="hljs-keyword">if</span> ((v = e[i].to) != fa) &#123;dfs(v, u); a[u] ^= a[v];&#125;<br>	<span class="hljs-keyword">if</span> (a[u] == tar) &#123;++cnt; a[u] = <span class="hljs-number">0</span>;&#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>
</li>
<li><p>D（构造）：寻找具有某个性质的路径可以考虑转化到欧拉序上二分。</p>
</li>
<li><p>E（性质）：注意到任意奇数长度的区间，所有数字的<strong>与和</strong> $\le$ <strong>异或和</strong>，因为与和为 $1$ 的位置，异或和里也是奇数个 $1$ 。而偶数长度的区间，<strong>与和</strong>为 $1$ 的位置<strong>异或和</strong>必定为 $0$ ，因此只要判断区间所有数比<strong>与和最高位</strong>更高的部分异或和是不是 $0$ 即可，枚举与和最高位，按照异或差分的思路维护，注意区间偶数长度的要求，需要区分奇偶位置。</p>
<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-keyword">int</span> a[N], lst[N][<span class="hljs-number">2</span>], ans;<br><br><span class="hljs-built_in">memset</span>(lst, <span class="hljs-number">0xcf</span>, <span class="hljs-keyword">sizeof</span>(lst));<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> t = <span class="hljs-number">20</span>; t &gt;= <span class="hljs-number">0</span>; --t) &#123;<br>	lst[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>, pre = <span class="hljs-number">0</span>; i &lt;= n; ++i) &#123;<br>    <span class="hljs-keyword">if</span> (!(a[i] &amp; (<span class="hljs-number">1</span> &lt;&lt; t))) &#123;<br>      pre = <span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">while</span> (!s.empty()) &#123;<br>        <span class="hljs-keyword">int</span> x = s.front(); s.pop();<br>        lst[x][<span class="hljs-number">0</span>] = lst[x][<span class="hljs-number">1</span>] = <span class="hljs-number">-1</span>;<br>      &#125;<br>      <span class="hljs-comment">//注意区间从头开始的情况</span><br>      lst[<span class="hljs-number">0</span>][i &amp; <span class="hljs-number">1</span>] = i;<br>      lst[<span class="hljs-number">0</span>][<span class="hljs-number">1</span> - (i &amp; <span class="hljs-number">1</span>)] = <span class="hljs-number">-1</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      pre ^= (a[i] &gt;&gt; (t + <span class="hljs-number">1</span>));<br>      <span class="hljs-keyword">int</span> fl = (i &amp; <span class="hljs-number">1</span>);<br>      <span class="hljs-keyword">if</span> (lst[pre][fl] &lt; <span class="hljs-number">0</span>) lst[pre][fl] = i;<br>        <span class="hljs-keyword">if</span> (lst[pre][fl] &gt;= <span class="hljs-number">0</span>) ans = max(ans, i - lst[pre][fl]);<br>        s.push(pre); <span class="hljs-comment">//记录需要清空的位置</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (!s.empty()) &#123;<br>      <span class="hljs-keyword">int</span> x = s.front(); s.pop();<br>      lst[x][<span class="hljs-number">0</span>] = lst[x][<span class="hljs-number">1</span>] = <span class="hljs-number">-1</span>;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

</li>
</ul>
<h2 id="Feb-12-Round-701-6-6"><a href="#Feb-12-Round-701-6-6" class="headerlink" title="Feb / 12 - Round #701 (6/6)"></a>Feb / 12 - Round #701 (6/6)</h2><ul>
<li><p>Add and Divide</p>
<p>首先最优解一定是 <code>++b</code> 若干次（可能为 $0$ ），然后再一直做 <code>a=a/b</code> 直到符合条件。</p>
<p>考虑最差的情况：$a=10^9,b=1$ ，至多只需 $1+\lceil \log_2{10^9}\rceil = 31$ 次，所以所有答案都 $\le 31$。</p>
<p>因此枚举<code>++b</code> 的操作次数 $k\ (0\le k\le 31)$  ，然后暴力计算答案即可，复杂度 $\text O(t\log^2 a)$ 。</p>
</li>
<li><p>B. Replace and Keep Sorted</p>
<p>考虑 $b_i\not =a_i$ ，那么考虑 $b_i$ 的取值范围：</p>
<ul>
<li><p>对于 $i=l$ 的情况， $1\le b_i&lt;a_{i+1}$ ，与 $a_i$ 不同的方案有 $a_{i + 1} - 2$ 个。</p>
</li>
<li><p>对于 $i=r$ 的情况， $a_{i-1}&lt;b_i\le k$ ，与 $a_i$ 不同的方案有 $k - a_{i-1} - 1$ 个。</p>
</li>
<li><p>对于 $l&lt;i&lt;r$ 的情况， $a_{i-1}&lt;b_i&lt;a_{i+1}$ ，与 $a_i$ 不同的方案有 $a_{i+1}-a_{i-1}-2$ 个。</p>
</li>
</ul>
<p>$i$ 不同的贡献是独立的，所以用前缀和优化一下第三部分的计算，各个位置的方案数求和即可。</p>
</li>
<li><p>C. Floor and Mod</p>
<p>设 $\lfloor a/b\rfloor=a\ \text{mod}\ b=k$ ，根据整除理论，有 $a=k *b+k$ ，且 $k &lt; b$ 。</p>
<p>考虑枚举 $k$ ，去数可行的 $b$ ，那么限制条件有：$1\le b \le y\ ,\ 1\le k*b+b=a\le x$</p>
<p>移项，得 $1\le b\le \min(y,\ x / k - 1)$ ，即 $k$ 的贡献为 $\min(y,\ x/k - 1)$ 。</p>
<p>又由 $k\le b$ 得 $k ^2 &lt;  k * b+k = a\le x$ ，得 $k\le \sqrt x$ ，因此 $O(t\sqrt x)$ 枚举 $k$ 直接计算即可。</p>
<hr>
<p>比赛时用的另一种做法，复杂度也是 $\text O(t\sqrt x)$ ：</p>
<p>考虑枚举 $b$ ，由上知可行的 $a = k *(b+1)$ 且 $1\le k\le b-1$ 。</p>
<p>考虑枚举 $b$ ，则贡献为 $\min(b-1,\lfloor x/(b + 1)\rfloor)$ ，具体的：</p>
<ul>
<li><p>当 $(b+1)(b-1)\le x$ 时，即 $b \le \sqrt{x + 1}$ 时，贡献为 $b-1$ ，可以等差数列求和。</p>
</li>
<li><p>否则贡献取 $\lfloor x /(b + 1)\rfloor$ ，整除分块计算即可。</p>
</li>
</ul>
</li>
<li><p>D. Multiples and Power Differences</p>
<p>数据范围 $1\le a_{i,j}\le 16$ ，观察：</p>
<ul>
<li><p>$\text{lcm}(1,2,\cdots,16)=720720\le 10^6 - 10^5$ </p>
</li>
<li><p>$16^4 = 65536\le 10^5$</p>
</li>
</ul>
<p>将矩阵黑白染色，黑色变为 $720720$ ， 白色变为 $720720+x^4$ 即可 （ $x$ 为原矩阵对应位置的数）</p>
</li>
<li><p>E. Move and Swap</p>
<p>设 $f[u]$ 表示红点在 $u$ 时，$u$ 及其子树的最大得分。</p>
<p>若红蓝不交换，假设红色在 $u$ ，则最优解本质上是 $u$ 儿子最大得分 + 同深度点与 $u$ 点权最大差值。</p>
<p>若红蓝交换，则本质是任选同深度节点 $v$ 的最优儿子，及 $v$ 与 $u$ 点权差值。</p>
<p>那么转移方程具体的（设 $d[u]$ 表示节点 $u$ 的深度）：<br>$$<br>f[u] = \max \bigg \{ \max_{s\in son[u]} f[s] + \max_{d[v] = d[u]} | a_u - a_v |\ ,\ \max_{d[v]=d[u]}\bigg(|a_u-a_v| + \max_{s\in son[v]} f[s]\bigg)\bigg \}<br>$$<br>可以发现转移是<strong>从深到浅</strong>转移的。第一部分直接枚举儿子转移即可，第二部分维护：</p>
<p>$$<br>mxp[d] = \max_{d[v]=d}\bigg(a_v + \max_{s\in son[v]} f[s]\bigg)\ ,\ mxm[d] = \max_{d[v]=d}\bigg(-a_v + \max_{s\in son[v]} f[s]\bigg)<br>$$</p>
<p>则第二部分的转移就可以表示为 $f[u] = \max{mxp[d[u]] - a[u],mxm[d[u]]+a[u]}$ 。</p>
</li>
<li><p>F. Copy or Prefix Sum</p>
<p>假设当前处理到第 $i$ 位，前 $i-1$ 位的和为 $S$ ，那么 $a_i=b_i$ 或者 $a_i=b_i-S$ 都是可以的。</p>
<p>那么答案为什么不是 $2^n$ 呢？因为 $S=0$ 时会重复计数。</p>
<p>设 $f_{i,S}$ 表示前 $i$ 位填完，前缀和为 $S$ 的方案数，那么转移为：</p>
<ul>
<li><p>$a_i=b_i$ ： $\forall S\ ,\  f_{i+1,S+b_i} += f_{i,S}$</p>
</li>
<li><p>$a_i = b_i -S$ ： $\forall S\ ,\ f_{i+1,b_i}+=f_{i,S}$ ，即 $f_{i+1,b_i}=\sum_{\forall  S} f_{i,S}$</p>
</li>
<li><p>$S=0$ 去重：$f_{i+1,b_i} -= f_{i,0}$</p>
</li>
</ul>
<p>综上，$i\to i+1$ 转移的过程即为：所有的 $f$ 整体向右偏移 $b_i$ ，然后对 $f_{b_i}$ 单独赋值。</p>
<p>因此省略第一维，使用 <code>map</code>  维护第二维，用记录整体偏移量的方法优化。</p>
<p>记录 $tot=\sum_{k=1}^ib_k\ ,\ ans=\sum_{\forall S} f_S$ ，递推即可，实现见 <a href="http://blog.gyx.me/code/codeforces/1485F.cpp">代码</a> 。</p>
</li>
</ul>
<h2 id="Feb-05-Round-699-4-6"><a href="#Feb-05-Round-699-4-6" class="headerlink" title="Feb / 05 - Round #699 (4/6)"></a>Feb / 05 - Round #699 (4/6)</h2><ul>
<li><p>A. Space Navigation</p>
<p>  统计四个方向的移动分别有多少，只保留走向目标向量对应方向的移动，判断是否可达。</p>
</li>
<li><p>B. New Colony</p>
<p>  观察数据范围 $n,h_i\le 100$ 最多扔 $10^4$ 个石头就结束了，模拟 $\text O(n^2h)$ 即可。</p>
</li>
<li><p>C. Fence Painting</p>
<p>首先如果最后一次涂色不在 $b_i$ 里，肯定无解。</p>
<p>然后如果所有涂色不能满足将所有 $a_i$ 和 $b_i$ 不一样的位置覆盖为 $b_i$ ，则无解。</p>
<p>剩下的情况必定有解，一种构造方法：</p>
<p>对每种颜色 $c$ 预处理出来所有 $a_i$ 和 $b_i$ 不同且 $b_i=c$ 的位置集合 $S_c$ 。</p>
<p>首先确定最后一次涂色的位置 $pos_m$ ：</p>
<ul>
<li><p>若 $S_{c_m}$ 为空，则令 $pos_m$ 为任意一个 $b_i=c_m$ 的位置。</p>
</li>
<li><p>若 $S_{c_m}$ 不为空，则让 $pos_m$ 为 $S_{c_m}$ 中的任意一个，并将该位置移出 $S_{c_m}$ 。</p>
</li>
</ul>
<p>然后时间倒序考虑，对于当前颜色 $c_j$ ：</p>
<ul>
<li><p>若 $S_{c_j}$ 为空，那么让 $pos_j=pos_m$ ，因为第 $m$ 次操作是最后一次，所以肯定会覆盖。</p>
</li>
<li><p>若 $S_{c_j}$ 不为空，则让 $pos_j$ 为 $S_{c_j}$ 中任意一个位置，然后将该位置移除 $S_{c_j}$ 即可。</p>
</li>
</ul>
</li>
<li><p>D. AB Graph</p>
<p>首先奇数长度一定有解，在两个点之间来回跑就可以了。</p>
<p>考虑偶数长度，如果存在连接两个点的一组边类型相同，那么就一直在这两个点之间来回跑就可以了。</p>
<p> 剩余的情况就是每一组边都是一条 $A$ 一条 $B$ ，那么对于 $n\ge 3$ 时很容易证明：</p>
<p><strong>存在一个点 $x$ ，满足存在另两个点 $y,z$ ，边 $x\to y$ 和 $x\to z$ 的类型不同。</strong> </p>
  <div class="note note-success">
            <p>反证法：假设对于任意的点，所有的出边类型相同，入边类型相同，且两种边类型不同。</p><p>不妨设点 $x$ 的所有出边类型均为 $A$ ，也就是说对于其他任意的点的入边类型均为 $A$ （由假设性质）</p><p>那么对于任意另外两个点 $y,z$ 之间的边的类型，存在矛盾：</p><p>$z$ 的入边由上知类型为 $A$ ，则 $y\to z$ 是 $z$ 的入边，类型必须为 $A$。</p><p>$y$ 的出边与入边类型相反，则 $y\to z$ 是 $y$ 的出边，类型必须为 $B$ 。</p>
          </div>

<p>因此只需要 $\text O(n)$ 枚举 $x$ ，$\text O(n)$ 扫描其他点，判断是否存在 $y,z$ 即可。</p>
<p>对于 $m = 4k$ 的情况，构造解形如 $x\ y\ x\ y\cdots x\ y\ x\ z\ x\ \cdots z\ x\ z\ x$ 即可。</p>
<p>对于 $m = 4k+2$ 的情况，构造解形如 $y\ x\ y\ x\ y\cdots x\ y\ x\ z\ x\ \cdots z\ x\ z\ x\ z$ 即可。</p>
</li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Contests/">Contests</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/12/29/face-the-unknown/">
                        <span class="hidden-mobile">Facing the Unknown</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"xG2rrgKMbyj4g3i1oO6vNAqH-gzGzoHsz","appKey":"dzMAbhtChev9VMBGRYG9PvAv","placeholder":"What you wanna say...","path":"window.location.pathname","avatar":"robohash","meta":["nick","mail","link"],"pageSize":10,"math":true,"md":true,"lang":"en","highlight":true,"recordIP":true,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false,"requiredFields":[]},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
Copyright &copy; 2018 - 2021 &nbsp;Colin Gao
</footer>


  <!-- SCRIPTS -->
  

<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.4/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
